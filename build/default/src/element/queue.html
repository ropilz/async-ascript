<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"><link rel="import" href="../../bower_components/marked-element/marked-element.html"></head><body><dom-module id="nn-queue"><template><style>.stack[hidden]{display:none;}.queue{position:absolute;left:20px;top:477px;}.queue-row{display:flex;}.label{background:white;height:51px;color:#2e2f2f;display:flex;align-items:center;justify-content:center;padding:15px;box-sizing:border-box;margin:0;margin-bottom:5px;width:170px;}.item{background:var(--js-block-color);font-family:var(--font-code);font-size:22px;height:51px;color:#2e2f2f;display:flex;align-items:center;justify-content:center;padding:15px;box-sizing:border-box;margin:0;margin-bottom:5px;margin-left:5px;overflow:hidden;}.item-container{display:flex;overflow:hidden;}</style><div class="queue" id="nn-queue" hidden="[[_hidden]]"><div class="queue-row"><p class="label">Task</p><div id="nn-task" class="item-container"></div></div><div class="queue-row"><p class="label">Microtask</p><div id="nn-micro" class="item-container"></div></div></div></template><script>class MlQueue extends Polymer.Element{static get is(){return'nn-queue'}static get properties(){return{micro:String,task:String,withanimation:Boolean}}static get observers(){return['_updateMicro(micro)','_updateTask(task)','_updateVisible(micro, task)']}_updateVisible(a,b){this._hidden=null===a&&null===b}_getQueueItems(a){return'string'!==typeof a||''===a?[]:a.split('>')}_updateTask(a){this._hidden=!1,null===a&&(this._hidden=!0);const b=this._getQueueItems(a);let c=[...b];this.taskItems=this.taskItems||[];const d=this.root.getElementById('nn-task');let e=c.length-this.taskItems.length;if(0<e){c=c.splice(-e,e);for(const a of c){const b=document.createElement('div');if(b.innerText=a,b.classList.add('item'),console.log(this.withanimation),this.withanimation){let a=b.animate([{opacity:0,offset:0,transform:'translateX(20px)'},{opacity:1,offset:0.3},{opacity:1,offset:1,transform:'translateY(0px)'}],{duration:135,easing:'ease-in',fill:'both'});a.onfinish=()=>a.cancel()}d.appendChild(b)}}else for(const a=d.children;0>e;)if(e+=1,this.withanimation){const b=a[0];let c=b.animate([{opacity:1,offset:0,marginLeft:'5px'},{opacity:1,offset:0.7},{opacity:0,offset:1,marginLeft:`-${b.clientWidth}px`}],{duration:135,easing:'ease-out',fill:'both'});c.onfinish=()=>requestAnimationFrame(()=>d.removeChild(b))}else d.removeChild(a[a.length-1]);this.taskItems=b}_updateMicro(a){this._hidden=!1,null===a&&(this._hidden=!0);const b=this._getQueueItems(a);let c=[...b];this.microItems=this.microItems||[];const d=this.root.getElementById('nn-micro');let e=c.length-this.microItems.length;if(0<e){c=c.splice(-e,e);for(const a of c){const b=document.createElement('div');if(b.innerText=a,b.classList.add('item'),console.log(this.withanimation),this.withanimation){let a=b.animate([{opacity:0,offset:0,transform:'translateX(20px)'},{opacity:1,offset:0.3},{opacity:1,offset:1,transform:'translateY(0px)'}],{duration:235,easing:'ease-in',fill:'both'});a.onfinish=()=>a.cancel()}d.appendChild(b)}}else for(const a=d.children;0>e;)if(e+=1,this.withanimation){const b=a[0];let c=b.animate([{opacity:1,offset:0,marginLeft:'5px'},{opacity:1,offset:0.7},{opacity:0,offset:1,marginLeft:`-${b.clientWidth}px`}],{duration:235,easing:'ease-out',fill:'both'});c.onfinish=()=>d.removeChild(b)}else d.removeChild(a[a.length-1]);this.microItems=b}}window.customElements.define(MlQueue.is,MlQueue),console.log('loaded');</script></dom-module></body></html>